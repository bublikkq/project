{"ast":null,"code":"export default {\n  name: \"App\",\n\n  data() {\n    return {\n      title: \"Приложение для работы с БД\",\n      search: \"\",\n      searchDoc: \"\",\n      username: \"\",\n      err_new_username: \"\",\n      added: \"\",\n      new_username: \"\",\n      show_editer: false,\n      userlist: \"\"\n    };\n  },\n\n  created() {\n    this.list();\n  },\n\n  methods: {\n    list: function () {\n      this.$axios({\n        method: \"get\",\n        url: \"//localhost:3000/user/getuserlist\"\n      }).then(response => {\n        this.userlist = response.data;\n      }).catch(err => {\n        console.log(err);\n      });\n    },\n    searchOne: function () {\n      this.$axios({\n        method: \"post\",\n        url: \"//localhost:3000/user/search\",\n        data: {\n          username: this.search\n        }\n      }).then(response => {\n        if (response.data) {\n          this.searchDoc = response.data;\n        } else {\n          this.searchDoc = null;\n        }\n      }).catch(err => {\n        this.searchDoc = err;\n      });\n    },\n    add: function () {\n      this.$axios({\n        method: \"post\",\n        url: \"//localhost:3000/user/add\",\n        data: {\n          username: this.username\n        }\n      }).then(response => {\n        console.log(response);\n\n        if (response.data.code == 11000) {\n          this.added = \"Duplicate key error!\";\n        } else {\n          this.added = this.username + \" inserted\";\n        }\n\n        this.list();\n      }).catch(err => {\n        this.added = err;\n      });\n    },\n    edit: function () {\n      this.show_editer = true;\n    },\n    edit_username: function () {\n      console.log(this.searchDoc);\n      this.$axios({\n        method: \"post\",\n        url: \"//localhost:3000/user/edit_username\",\n        data: {\n          username: this.searchDoc.username,\n          new_username: this.new_username\n        }\n      }).then(response => {\n        if (response.data.code == 11000) {\n          return this.err_new_username = response.data.codeName;\n        }\n\n        this.new_username = null;\n        this.search = null;\n        this.show_editer = false;\n        this.searchDoc = false;\n        this.list();\n      });\n    },\n    remove: function (id) {\n      this.$axios({\n        method: \"post\",\n        url: \"//localhost:3000/user/remove\",\n        data: {\n          id: id\n        }\n      }).then(() => {\n        this.list();\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["name","data","title","search","searchDoc","username","err_new_username","added","new_username","show_editer","userlist","created","list","methods","$axios","method","url","then","response","catch","err","console","log","searchOne","add","code","edit","edit_username","codeName","remove","id"],"sourceRoot":"","sources":["C:\\Users\\Any\\Desktop\\project\\src\\App.vue"],"sourcesContent":["<template>\n  <header>\n    <div class=\"container\">\n      <h2 class=\"app-title\">{{ title }}</h2>\n      <p>Использованы технологии: node, express, mongodb, vue</p>\n    </div>\n  </header>\n  <main>\n    <div class=\"container\">\n      <section>\n        <article>\n          <h4 class=\"section-heading\">Поиск документа</h4>\n          <label for=\"search\" class=\"form-label\">Поиск пользователя</label>\n          <div class=\"mb-2\">\n            <div class=\"d-flex mb-2\">\n              <input\n                class=\"form-control\"\n                type=\"text\"\n                id=\"search\"\n                v-model=\"search\"\n              />\n              <button @click=\"searchOne\" class=\"btn btn-primary\">Найти</button>\n            </div>\n            <p class=\"text-success\" v-if=\"searchDoc\">\n              <span><b>element id:</b>{{ this.searchDoc._id }}</span\n              ><a href=\"javascript:void(0)\" @click=\"edit\">Редактировать</a>\n            </p>\n            <p class=\"text-muted\" v-if=\"searchDoc == null && search\">\n              <span class=\"text-danger\">Не найдено!</span>\n            </p>\n          </div>\n\n          <div class=\"new_username\" v-if=\"show_editer && searchDoc\">\n            <label for=\"new_username\" class=\"form-label\"\n              >Введите новое значение</label\n            >\n            <div class=\"mb-2\">\n              <div class=\"d-flex mb-2\">\n                <input\n                  class=\"form-control\"\n                  type=\"text\"\n                  id=\"new_username\"\n                  v-model=\"new_username\"\n                />\n                <button @click=\"edit_username\" class=\"btn btn-primary\">\n                  Сохранить\n                </button>\n              </div>\n            </div>\n            <p v-if=\"err_new_username\" class=\"text-danger\">{{ err_new_username }}</p>\n          </div>\n        </article>\n\n        <article>\n          <h4>Добавление пользователя</h4>\n          <label for=\"search\" class=\"form-label\">Добавить пользователя</label>\n          <div class=\"mb-2\">\n            <div class=\"d-flex mb-2\">\n              <input\n                class=\"form-control\"\n                type=\"text\"\n                id=\"search\"\n                v-model=\"username\"\n              />\n              <button @click=\"add\" class=\"btn btn-primary\">Добавить</button>\n            </div>\n            <p class=\"text-muted\" v-if=\"added\">{{ this.added }}</p>\n          </div>\n        </article>\n      </section>\n      <section>\n        <h4 class=\"section-heading\">База данных</h4>\n        <div v-if=\"userlist\">\n          <table class=\"table table-dark table-striped table-hover\">\n            <thead>\n              <tr>\n                <th scope=\"col\">#</th>\n                <th scope=\"col\">_id</th>\n                <th scope=\"col\">username</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr v-for=\"(user, index) in userlist\" :key=\"user\">\n                <td scope=\"row\">{{ index }}</td>\n                <td >{{ user._id }}</td>\n                <td >{{ user.username }} <button @click=\"remove(user.username)\">Удалить</button></td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </section>\n    </div>\n  </main>\n</template>\n\n<script>\nexport default {\n  name: \"App\",\n  data() {\n    return {\n      title: \"Приложение для работы с БД\",\n      search: \"\",\n      searchDoc: \"\",\n      username: \"\",\n      err_new_username: \"\",\n      added: \"\",\n      new_username: \"\",\n      show_editer: false,\n      userlist: \"\",\n    };\n  },\n created () {\n   this.list()\n },\n  methods: {\n    list: function () {\n      this.$axios({\n        method: \"get\",\n        url: \"//localhost:3000/user/getuserlist\",\n      })\n        .then((response) => {\n          this.userlist = response.data;\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    searchOne: function () {\n      this.$axios({\n        method: \"post\",\n        url: \"//localhost:3000/user/search\",\n        data: {\n          username: this.search,\n        },\n      })\n        .then((response) => {\n          if (response.data) {\n            this.searchDoc = response.data;\n          } else {\n            this.searchDoc = null;\n          }\n        })\n        .catch((err) => {\n          this.searchDoc = err;\n        });\n    },\n    add: function () {\n      this.$axios({\n        method: \"post\",\n        url: \"//localhost:3000/user/add\",\n        data: {\n          username: this.username,\n        },\n      })\n        .then((response) => {\n          console.log(response);\n          if (response.data.code == 11000) {\n            this.added = \"Duplicate key error!\";\n          } else {\n            this.added = this.username + \" inserted\";\n          }\n          this.list()\n        })\n        .catch((err) => {\n          this.added = err;\n        });\n    },\n    edit: function () {\n      this.show_editer = true;\n    },\n    edit_username: function () {\n      console.log(this.searchDoc);\n      this.$axios({\n        method: \"post\",\n        url: \"//localhost:3000/user/edit_username\",\n        data: {\n          username: this.searchDoc.username,\n          new_username: this.new_username,\n        },\n      }).then((response) => {\n        if (response.data.code == 11000) {\n          return this.err_new_username = response.data.codeName\n        }\n\n        this.new_username = null;\n        this.search = null;\n        this.show_editer = false\n        this.searchDoc = false\n        this.list()\n      });\n    },\n    remove: function (id) {\n      this.$axios({\n        method: \"post\",\n        url: \"//localhost:3000/user/remove\",\n        data: {\n          id: id,\n        },\n      })\n        .then(() => {\n          this.list()\n        })\n        .catch((err) => {\n          console.log(err)\n        });\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"~bootstrap/dist/css/bootstrap.min.css\";\n@import url(\"https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600&display=swap\");\n#app {\n  font-family: \"Montserrat\", sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n  margin-top: 60px;\n}\nheader {\n  // border-bottom: 1px solid #f4f4f4;\n  margin-bottom: 30px;\n  padding-bottom: 30px;\n}\n.section-heading {\n  font-weight: 600;\n}\ninput {\n  margin-right: 2px;\n}\ninput,\nbutton {\n  border: 0;\n  border: 1px solid #000;\n  background: transparent;\n  outline: none;\n}\n.form-control {\n  margin-right: 5px;\n}\nbutton {\n  cursor: pointer;\n}\n\narticle {\n  text-align: left;\n  margin-bottom: 15px;\n  p {\n    display: flex;\n    span {\n      margin: auto 0;\n    }\n    a {\n      display: inline-block;\n      text-decoration: none;\n      margin: auto 0 auto 15px;\n      background: #d79563;\n      color: #fff;\n      border-radius: 32px;\n      font-size: 12px;\n      padding: 6px 16px;\n      &:hover {\n        background: #f3af7c;\n        color: #fff;\n      }\n    }\n  }\n}\n\nsection {\n  margin-bottom: 40px;\n  &:last-child {\n    margin-bottom: 0;\n  }\n}\n\n.newuser {\n  padding: 0.9rem;\n  background: #eee;\n  border-radius: 0.9rem;\n}\n\ntd {\n  button {\n    background: #000;\n    border-radius: 5px;\n    color: #fff;\n    font-size: 12px;\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}